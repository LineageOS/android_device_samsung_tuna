{
  "comments": [
    {
      "key": {
        "uuid": "9a41bdd9_25c85a74",
        "filename": "liblight/lights.c",
        "patchSetId": 6
      },
      "lineNbr": 53,
      "author": {
        "id": 2134
      },
      "writtenOn": "2013-10-06T09:27:43Z",
      "side": 1,
      "message": "static struct an30259a_pr_control g_led_states[LED_TYPE_LAST + 1];\n\nIs correct to solve the bug below?",
      "revId": "ecd1d843ed1fea8ebe4806541445d80e889ec4dd",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a41bdd9_e5c6f215",
        "filename": "liblight/lights.c",
        "patchSetId": 6
      },
      "lineNbr": 53,
      "author": {
        "id": 1063
      },
      "writtenOn": "2013-10-06T17:28:21Z",
      "side": 1,
      "message": "That would\u0027ve been the alternative to my suggestion below, yes. It doesn\u0027t matter which one is used to fix the problem, although my way uses less memory ;)",
      "parentUuid": "9a41bdd9_25c85a74",
      "revId": "ecd1d843ed1fea8ebe4806541445d80e889ec4dd",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a41bdd9_a29ea005",
        "filename": "liblight/lights.c",
        "patchSetId": 6
      },
      "lineNbr": 161,
      "author": {
        "id": 1063
      },
      "writtenOn": "2013-10-06T03:14:59Z",
      "side": 1,
      "message": "The index must be LED_TYPE_LAST - 1 to not exceed the array bounds (PS3 had that bug as well).",
      "revId": "ecd1d843ed1fea8ebe4806541445d80e889ec4dd",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a41bdd9_e5a032a8",
        "filename": "liblight/lights.c",
        "patchSetId": 6
      },
      "lineNbr": 161,
      "author": {
        "id": 2134
      },
      "writtenOn": "2013-10-06T09:27:43Z",
      "side": 1,
      "message": "See above.",
      "parentUuid": "9a41bdd9_a29ea005",
      "revId": "ecd1d843ed1fea8ebe4806541445d80e889ec4dd",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a41bdd9_02f3cc74",
        "filename": "liblight/lights.c",
        "patchSetId": 6
      },
      "lineNbr": 191,
      "author": {
        "id": 2134
      },
      "writtenOn": "2013-10-06T02:45:08Z",
      "side": 1,
      "message": "It solves the problem with LED on charging.",
      "revId": "ecd1d843ed1fea8ebe4806541445d80e889ec4dd",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a41bdd9_e294a8e9",
        "filename": "liblight/lights.c",
        "patchSetId": 6
      },
      "lineNbr": 191,
      "author": {
        "id": 1063
      },
      "writtenOn": "2013-10-06T03:14:59Z",
      "side": 1,
      "message": "I don\u0027t understand. A light is set with color !\u003d 0, but must be off? Which type is it? I don\u0027t remember any similar behaviour from mako liblights.\n\nAlso, can you please check is the kernel headers what the actual value of LED_LIGHT_OFF is?",
      "parentUuid": "9a41bdd9_02f3cc74",
      "revId": "ecd1d843ed1fea8ebe4806541445d80e889ec4dd",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a41bdd9_65ce6285",
        "filename": "liblight/lights.c",
        "patchSetId": 6
      },
      "lineNbr": 191,
      "author": {
        "id": 2134
      },
      "writtenOn": "2013-10-06T09:27:43Z",
      "side": 1,
      "message": "In linux/leds-an30259a.h the values are:\n#define LED_LIGHT_OFF 0\n#define LED_LIGHT_ON 1\n#define LED_LIGHT_PULSE 2\n#define LED_LIGHT_SLOPE 3\n\nIs this that you ask?",
      "parentUuid": "9a41bdd9_e294a8e9",
      "revId": "ecd1d843ed1fea8ebe4806541445d80e889ec4dd",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a41bdd9_05cc3634",
        "filename": "liblight/lights.c",
        "patchSetId": 6
      },
      "lineNbr": 191,
      "author": {
        "id": 1063
      },
      "writtenOn": "2013-10-06T17:28:21Z",
      "side": 1,
      "message": "Yes. I just wanted to know whether by doing the initial memset() the state is set of off - turns out it is.\n\nI\u0027m still interested in the type of the light which comes in as solid white, but needs to be off, though.",
      "parentUuid": "9a41bdd9_65ce6285",
      "revId": "ecd1d843ed1fea8ebe4806541445d80e889ec4dd",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a41bdd9_658982ca",
        "filename": "liblight/lights.c",
        "patchSetId": 6
      },
      "lineNbr": 191,
      "author": {
        "id": 2134
      },
      "writtenOn": "2013-10-06T19:31:19Z",
      "side": 1,
      "message": "This state (solid white) happens when the first notification is received and only get turn off through a reboot.",
      "parentUuid": "9a41bdd9_05cc3634",
      "revId": "ecd1d843ed1fea8ebe4806541445d80e889ec4dd",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a41bdd9_4590feec",
        "filename": "liblight/lights.c",
        "patchSetId": 6
      },
      "lineNbr": 191,
      "author": {
        "id": 1063
      },
      "writtenOn": "2013-10-06T19:58:44Z",
      "side": 1,
      "message": "That doesn\u0027t yet answer my question:\n- Is the type parameter 1 (for notification) for the occurrence?\n- If it is, isn\u0027t it followed by another call into here with type\u003d1 and color\u003d0 (this is supposed to happen when e.g. unlocking the screen)? This should set the state to OFF again.\n\nI ask because no such special treatment of the battery light is needed on mako, so I suspect this is a band aid for a different problem. If it isn\u0027t, I\u0027d like this to be fully understood at least.",
      "parentUuid": "9a41bdd9_658982ca",
      "revId": "ecd1d843ed1fea8ebe4806541445d80e889ec4dd",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a41bdd9_655e6247",
        "filename": "liblight/lights.c",
        "patchSetId": 6
      },
      "lineNbr": 191,
      "author": {
        "id": 1063
      },
      "writtenOn": "2013-10-06T22:40:34Z",
      "side": 1,
      "message": "Actually, I\u0027m willing to bet that it\u0027s the attention light that causes this. It\u0027s turned off by PowerManager by setting turnOnMS \u003d turnOffMS \u003d 0. That wouldn\u0027t exactly match your fix, though.\n\nCan you please add a line like this:\n\nALOGD(\"set_light_leds: type %d, color %08x, mode %d, on %d off %d\", type, state-\u003ecolor, state-\u003eflashMode, state-\u003eflashOnMS, state-\u003eflashOffMS);\n\nto the beginning of the function and provide a log of startup to white being permanently lit? Thanks.",
      "parentUuid": "9a41bdd9_4590feec",
      "revId": "ecd1d843ed1fea8ebe4806541445d80e889ec4dd",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a41bdd9_88105b50",
        "filename": "liblight/lights.c",
        "patchSetId": 6
      },
      "lineNbr": 191,
      "author": {
        "id": 2134
      },
      "writtenOn": "2013-10-06T23:56:18Z",
      "side": 1,
      "message": "You can see the log in: http://pastebin.com/tqmX8MF6\n\nPerhaps the problem is at line 7, when a first notification of the system is received. Type 0 doesn\u0027t go to color 0x000000.",
      "parentUuid": "9a41bdd9_655e6247",
      "revId": "ecd1d843ed1fea8ebe4806541445d80e889ec4dd",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    }
  ]
}